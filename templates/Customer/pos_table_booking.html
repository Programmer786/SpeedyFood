<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Speedy Food | POS - Customer Order System</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	
	<!-- ================== BEGIN core-css ================== -->
	<link rel="stylesheet" href="{{ url_for('static', filename='css/vendor.min.css') }}" type="text/css" />
	<link rel="stylesheet" href="{{ url_for('static', filename='css/app.min.css') }}" type="text/css" />
	<link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}" type="text/css" />
	<!-- ================== BEGIN page-css ================== -->
	<link rel="stylesheet" href="{{ url_for('static', filename='plugins/bootstrap-datepicker/dist/css/bootstrap-datepicker.css') }}" type="text/css" />
	<link rel="stylesheet" href="{{ url_for('static', filename='plugins/bootstrap-datepicker/dist/css/bootstrap-datepicker3.css') }}" type="text/css" />
	<!-- ================== END page-css ================== -->
	<!-- ================== END core-css ================== -->
	<link rel="stylesheet" href="{{ url_for('static', filename='plugins/datatables.net-bs5/css/dataTables.bootstrap5.min.css') }}" type="text/css" />
	<!-- Custom CSS for chat messages -->
	<style>
		.chat-messages {
			max-height: 300px;
			overflow-y: auto;
			margin-bottom: 20px;
		}
		.user-message {
			text-align: right;
			margin-bottom: 16px;
		}
		.bot-response {
			text-align: left;
			margin-bottom: 16px;
		}
	</style>
	<style>
        body {
            font-family: Arial, sans-serif;
        }
        .pos-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #f8f8f8;
            border-bottom: 1px solid #ddd;
        }
        .logo {
            display: flex;
            align-items: center;
        }
        .logo-img {
            margin-right: 10px;
        }
        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .nav {
            display: flex;
            align-items: center;
        }
        .menu-link {
            text-decoration: none;
            color: #333;
            display: flex;
            align-items: center;
        }
        .menu-img {
            margin-right: 10px;
        }
        .dropdown-menu {
            min-width: 200px;
        }
        .dropdown-item i {
            margin-left: auto;
        }
    </style>
</head>
<body class='pace-top'>
	<!-- BEGIN #app -->
	<div id="app" class="app app-content-full-height app-without-sidebar app-without-header">
		<!-- BEGIN #content -->
		<div id="content" class="app-content p-0">
			<!-- BEGIN pos -->
			<div class="pos pos-vertical pos-with-header" id="pos">
				<!-- BEGIN pos-container -->
				<div class="pos-container">
					<!-- BEGIN pos-header -->
					<div class="pos-header">
						<div class="logo">
							<a href="/" class="text-primary" >
								<div class="logo-img"><i class="fa fa-bowl-rice" style="font-size: 1.5rem;"></i></div>
								<div class="logo-text" style="font-weight: bold;">SpeedyFood</div>
							</a>
						</div>
						<div class="time" id="time">00:00</div>
						<div class="nav">
							<div class="nav-item dropdown">
								<a href="#" data-bs-toggle="dropdown" data-display="static" class="menu-link">
									<div class="menu-img online">
										<img src="{{ url_for('static', filename='img/user/down_arrow.jpg') }}" style="width: 40px !important;" class="ms-100 mh-100 rounded-circle" alt="Profile Picture">
									</div>
									<div class="menu-text">{{ session.Cust_FullName }}</div>
								</a>
								<div class="dropdown-menu dropdown-menu-end me-lg-3">
									{% if session.cust_RolName %}
									<a class="dropdown-item d-flex align-items-center" href="{{url_for('update_customer_profile', CustId=session.Cust_Id)}}">Edit Profile <i class="fa fa-user-circle fa-fw ms-auto text-body text-opacity-50"></i></a>
									{% endif %}
									<div class="dropdown-divider"></div>
									{% if session.cust_RolName %}
										<a class="dropdown-item d-flex align-items-center" href="/cust_logout">Log Out <i class="fa fa-sign-out-alt fa-fw ms-auto text-body text-opacity-50"></i></a>
									{% else %}
										<a class="dropdown-item d-flex align-items-center" href="/cust_login">Login <i class="fa fa-sign-in-alt fa-fw ms-auto text-body text-opacity-50"></i></a>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
					<!-- END pos-header -->
				
					<!-- BEGIN pos-content -->
					<div class="pos-content">
						<div class="pos-content-container h-100 p-4">
							<!-- BEGIN Message-Show -->
							{% with messages = get_flashed_messages(with_categories=true) %}
								{% if messages %}
									{% for category, message in messages %}
										<div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
											<strong>{{ category|capitalize }}!</strong> {{ message|capitalize }}.
											<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
										</div>
									{% endfor %}
								{% endif %}
							{% endwith %}
							<!-- End Message-Show -->
							<!-- Start: Available Table -->
							<div class="d-md-flex align-items-center mb-4">
								<div class="flex-1">
									<div class="fs-20px mb-1">Available Table (<span id="available-table-count">0</span>/{{tables_count}})</div>
									<div class="mb-2 mb-md-0 d-flex">
										<div class="d-flex align-items-center me-3">
											<i class="fa fa-circle fa-fw text-body text-opacity-25 fs-9px me-1"></i> Completed
										</div>
										<div class="d-flex align-items-center me-3">
											<i class="fa fa-circle fa-fw text-warning fs-9px me-1"></i> Upcoming
										</div>
										<div class="d-flex align-items-center me-3">
											<i class="fa fa-circle fa-fw text-theme fs-9px me-1"></i> In-progress
										</div>
									</div>
								</div>
								<div>
									<div class="input-group date mb-0" data-provide="datepicker" data-date-format="dd-mm-yyyy" data-date-start-date="Date.default">
										<input type="text" class="form-control" name="filter_date" id="filter-date" placeholder="Today's">
										<span class="input-group-text input-group-addon">
										  <i class="far fa-calendar fa-lg"></i>
										</span>
									</div>
								</div>
							</div>
							<!-- End: Available Table -->
							<!-- Start: All Tables -->
							<div class="row gx-4">
								{% for one_table in all_tables_retrieve %}
									<div class="col-xl-2 col-lg-3 col-md-4 col-sm-6">
										<a href="#" data-bs-toggle="modal" data-bs-target="#modalPosBooking" data-bs-id="{{one_table.table_id}}" data-bs-name="{{one_table.table_name}}" data-bs-pax="{{one_table.table_pax}}" class="pos-table-booking">
											<div class="pos-table-booking-container">
												<div class="pos-table-booking-header">
													<div class="d-flex align-items-center">
														<div class="flex-1">
															<div class="title">Table</div>
															<div class="no">{{one_table.table_name}}</div>
															<div class="desc">max {{one_table.table_pax}} pax</div>
														</div>
														{% if one_table.table_id == one_table.table_reservations.table_id %}
														<div class="text-body text-opacity-25">
															<i class="far fa-check-circle fa-3x"></i>
														</div>
														{% else %}
														<div class="pe-1 text-primary">
															<i class="far fa-check-circle fa-3x"></i>
														</div>
														{% endif %}
													</div>
												</div>
												<div class="pos-table-booking-body">
													{% if one_table.table_reservations %}
														{% set reservation_found = False %}
														{% for reservation in one_table.table_reservations %}
															{% if reservation.reservation_date == session.filter_date %}
																{% set reservation_found = True %}
																<div class="booking">
																	<div class="time">08:00am</div>
																	<div class="info">{{ reservation.time_slot.description_08_am or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">09:00am</div>
																	<div class="info">{{ reservation.time_slot.description_09_am or '-' }}</div>
																	<div class="status completed"><i class="fa fa-circle"></i></div>
																</div>
																<div class="booking">
																	<div class="time">10:00am</div>
																	<div class="info">{{ reservation.time_slot.description_10_am or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">11:00am</div>
																	<div class="info">{{ reservation.time_slot.description_11_am or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking highlight">
																	<div class="time">12:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_12_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">01:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_01_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">02:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_02_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">03:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_03_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">04:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_04_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">05:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_05_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">06:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_06_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">07:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_07_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">08:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_08_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">09:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_09_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<div class="booking">
																	<div class="time">10:00pm</div>
																	<div class="info">{{ reservation.time_slot.description_10_pm or '-' }}</div>
																	<div class="status"></div>
																</div>
																<!-- Repeat for other time slots -->
															{% endif %}
														{% endfor %}
														{% if not reservation_found %}
															<div class="booking">
																<div class="time">No reservations</div>
																<div class="info">-</div>
																<div class="status"></div>
															</div>
														{% endif %}
													{% else %}
														<div class="booking">
															<div class="time">08:00am</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">09:00am</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">10:00am</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">11:00am</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking highlight">
															<div class="time">12:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">01:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">02:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">03:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">04:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">05:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">06:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">07:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">08:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">09:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
														<div class="booking">
															<div class="time">10:00pm</div>
															<div class="info">-</div>
															<div class="status"></div>
														</div>
													{% endif %}
												</div>
											</div>
										</a>
									</div>
								{% endfor %}

							</div>
							<!-- End: All Tables -->
						</div>
					</div>
					<!-- END pos-content -->
				</div>
				<!-- END pos-container -->
			</div>
			<!-- END pos -->
		</div>
		<!-- END #content -->

		<!-- BEGIN #modalPosBooking -->
		<div class="modal modal-pos fade" id="modalPosBooking">
			<!-- BEGIN modal-dialog -->
			<div class="modal-dialog modal-lg">
				<!-- BEGIN modal-content -->
				<div class="modal-content border-0">
					<!-- BEGIN card -->
					<div class="card">
						<!-- BEGIN card-body -->
						<div class="card-body p-0">
							<form action="/table_reserve_with_time" method="post">
								<!-- BEGIN modal-header -->
								<div class="modal-header align-items-center">
									<h5 class="modal-title d-flex align-items-end">
										<div class="table_name"></div>
										<small class="fs-14px ms-2 text-body text-opacity-50 fw-semibold table_pax"></small>
									</h5>
									<div class="ms-auto" style="font-weight: bold; font-size: 22px;">
										Date: <i class="table_date"></i>
									</div>
									<a href="#" data-bs-dismiss="modal" class="ms-auto btn-close"></a>
								</div>
								<!-- END modal-header -->
								<!-- BEGIN modal-body -->
								<div class="modal-body">
									<input type="hidden" class="form-control TableId" name="table_id" readonly>
									<input type="hidden" class="form-control TablePax" name="table_chair" readonly>
									<input type="hidden" class="form-control TableDate" name="table_date" readonly>
									<div class="row">
										<div class="col-lg-6">
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">08:00am</div>
													<input type="text" class="form-control" name="description_08_am">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">09:00am</div>
													<input type="text" class="form-control" name="description_09_am">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">10:00am</div>
													<input type="text" class="form-control" name="description_10_am">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">11:00am</div>
													<input type="text" class="form-control" name="description_11_am">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">12:00pm</div>
													<input type="text" class="form-control" name="description_12_pm">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">01:00pm</div>
													<input type="text" class="form-control" name="description_01_pm">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">02:00pm</div>
													<input type="text" class="form-control" name="description_02_pm">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">03:00pm</div>
													<input type="text" class="form-control" name="description_03_pm">
												</div>
											</div>
										</div>
										<div class="col-lg-6">
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">04:00pm</div>
													<input type="text" class="form-control" name="description_04_pm">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">05:00pm</div>
													<input type="text" class="form-control" name="description_05_pm">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">06:00pm</div>
													<input type="text" class="form-control" name="description_06_pm">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">07:00pm</div>
													<input type="text" class="form-control" name="description_07_pm">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">08:00pm</div>
													<input type="text" class="form-control" name="description_08_pm">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">09:00pm</div>
													<input type="text" class="form-control" name="description_09_pm">
												</div>
											</div>
											<div class="form-group mb-2">
												<div class="input-group">
													<div class="input-group-text fw-semibold w-90px fs-13px">10:00pm</div>
													<input type="text" class="form-control" name="description_10_pm">
												</div>
											</div>
										</div>
									</div>
								</div>
								<!-- END modal-body -->
								<!-- BEGIN modal-footer -->
								<div class="modal-footer">
									<a href="#" class="btn btn-default fs-13px fw-semibold w-100px" data-bs-dismiss="modal">Cancel</a>
									<button type="submit" class="btn btn-theme fs-13px fw-semibold w-100px">Book</button>
								</div>
								<!-- END modal-footer -->
							</form>
						</div>
						<!-- END card-body -->
					</div>
					<!-- END card -->
				</div>
				<!-- END modal-content -->
			</div>
			<!-- END modal-dialog -->
		</div>
		<!-- END #modalPosBooking -->
		
		<!-- BEGIN theme-panel -->
		<div class="theme-panel">
			<a href="javascript:;" class="theme-collapse-btn bg-warning" data-toggle="modal" data-target="#chatModal">
				<i class="fab fa-rocketchat"></i>
			</a>
		</div>
		
		<!-- Chat Modal -->
		<div class="modal fade" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="chatModalLabel">Chat Bot</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div id="chat-messages" class="chat-messages"></div>
						<div class="input-group">
							<input type="text" id="chat-input" class="form-control chat-input" placeholder="Type a message...">
							<div class="input-group-append">
								<button id="send-chat" class="btn btn-primary send-chat-btn">Send</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- END theme-panel -->
		
		<!-- BEGIN btn-scroll-top -->
		<a href="#" data-click="scroll-top" class="btn-scroll-top fade"><i class="fa fa-arrow-up"></i></a>
		<!-- END btn-scroll-top -->
	</div>
	<!-- END #app -->

	
	<!-- ================== BEGIN core-js ================== -->
	<script src="{{ url_for('static', filename='js/vendor.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/app.min.js') }}"></script>
	<!-- ================== END core-js ================== -->

	<!-- ================== BEGIN use for add to card data ================== -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<!-- ================== END BEGIN use for add to card data ================== -->

	<!-- ================== BEGIN page-js ================== -->
	<script src="{{ url_for('static', filename='js/demo/pos-customer-order.demo.js') }}"></script>
	<!-- ================== END page-js ================== -->
	<!-- ================== BEGIN Bootstrap for Model-js ================== -->
	<script src="{{ url_for('static', filename='plugins/bootstrap/js/bootstrap.min.js') }}"></script>
	<script src="{{ url_for('static', filename='plugins/bootstrap/js/popper.min.js') }}"></script>
	<!-- ================== END Bootstrap for Model-js ================== -->
	<!-- ================== BEGIN page-js ================== -->
	<script src="{{ url_for('static', filename='plugins/bootstrap-datepicker/dist/js/bootstrap-datepicker.js') }}"></script>
	<script src="{{ url_for('static', filename='js/demo/pos-table-booking.demo.js') }}"></script>
	<!-- ================== END page-js ================== -->
	<!-- JavaScript to handle chat interactions -->
	<script>
		$(document).ready(function(){
			function sendMessage() {
				var userMessage = $('#chat-input').val();
				if (userMessage.trim() === '') {
					return;
				}
	
				// Display the user's message
				$('#chat-messages').append('<div class="user-message bg-primary">' + userMessage + '</div>');
	
				// Send the user's message to the Flask backend
				$.ajax({
					type: 'POST',
					url: '/chatbot',
					contentType: 'application/json',
					data: JSON.stringify({ 'message': userMessage }),
					success: function(response) {
						var botResponse = response.response;
						// Display the bot's response
						$('#chat-messages').append('<div class="bot-response bg-success">' + botResponse + '</div>');
					},
					error: function() {
						$('#chat-messages').append('<div class="bot-response bg-success">Error communicating with the bot.</div>');
					}
				});
	
				// Clear the input field
				$('#chat-input').val('');
			}
	
			$('#send-chat').click(function(){
				sendMessage();
			});
	
			$('#chat-input').keypress(function(event) {
				if (event.which == 13) { // Enter key pressed
					sendMessage();
					event.preventDefault(); // Prevent the default form submission
				}
			});
		});
	</script>

	<!--Start: JavaScript to handle table timing model -->
	<script>
		var modalPosBooking = document.getElementById('modalPosBooking')
		modalPosBooking.addEventListener('show.bs.modal', function (event) {
		// Button that triggered the modal
		var button = event.relatedTarget
		// Extract info from data-bs-* attributes
		var table_id = button.getAttribute('data-bs-id')
		var table_name = button.getAttribute('data-bs-name')
		var table_pax = button.getAttribute('data-bs-pax')
		// If necessary, you could initiate an AJAX request here
		// and then do the updating in a callback.
		//
		// Update the modal's content.
		var tableName = modalPosBooking.querySelector('.table_name')
		var tablePax = modalPosBooking.querySelector('.table_pax')
		var TableIdInput = modalPosBooking.querySelector('.TableId')
		var TablePaxInput = modalPosBooking.querySelector('.TablePax')

		tableName.textContent = 'Table ' + table_name
		tablePax.textContent = 'max ' + table_pax + ' pax '
		TableIdInput.value = table_id
		TablePaxInput.value = table_pax
		})
	</script>
	<!--End: JavaScript to handle table timing model -->
	<!--Start: initialize the date picker, set today's date and handle the changeDate event -->
	<script>
		$(document).ready(function() {
			// Initialize the date picker
			$('.input-group.date').datepicker({
				format: 'dd-mm-yyyy',
				startDate: '0d'
			}).datepicker('setDate', new Date()) // Set the date picker to today's date
			.on('changeDate', function(e) {
				// Get the selected date
				var selectedDate = $('#filter-date').val();
				// Update the TableDate input field in the modal
				$('.TableDate').val(selectedDate);
				// Update the modal's title date part
				$('.table_date').text(selectedDate);
			});
		
			// Set the input field value to today's date
			var today = new Date();
			var dd = String(today.getDate()).padStart(2, '0');
			var mm = String(today.getMonth() + 1).padStart(2, '0'); // January is 0!
			var yyyy = today.getFullYear();
			var todayFormatted = dd + '-' + mm + '-' + yyyy;
			$('#filter-date').val(todayFormatted);
		
			// Update the TableDate input field in the modal
			$('.TableDate').val(todayFormatted);
			// Update the modal's title date part
			$('.table_date').text(todayFormatted);
		});
	</script>
	<!--End: initialize the date picker, set today's date and handle the changeDate event -->
	<script>
		$(document).ready(function() {
			// Initialize the date picker
			$('.input-group.date').datepicker({
				format: 'dd-mm-yyyy',
				startDate: '0d'
			}).datepicker('setDate', new Date()) // Set the date picker to today's date
			.on('changeDate', function(e) {
				// Get the selected date
				var selectedDate = $('#filter-date').val();
				// Update the TableDate input field in the modal
				$('.TableDate').val(selectedDate);
				// Update the modal's title date part
				$('.table_date').text(selectedDate);

				// Fetch available tables for the selected date
				fetchAvailableTables(selectedDate);
			});

			// Set the input field value to today's date
			var today = new Date();
			var dd = String(today.getDate()).padStart(2, '0');
			var mm = String(today.getMonth() + 1).padStart(2, '0'); // January is 0!
			var yyyy = today.getFullYear();
			var todayFormatted = dd + '-' + mm + '-' + yyyy;
			$('#filter-date').val(todayFormatted);

			// Update the TableDate input field in the modal
			$('.TableDate').val(todayFormatted);
			// Update the modal's title date part
			$('.table_date').text(todayFormatted);

			// Fetch available tables for today's date
			fetchAvailableTables(todayFormatted);
		});

		function fetchAvailableTables(date) {
			$.ajax({
				url: '/get_available_tables',
				type: 'GET',
				data: {
					date: date
				},
				success: function(response) {
					// Update the available table count
					$('#available-table-count').text(response.available_tables);
				},
				error: function(error) {
					console.error('Error fetching available tables:', error);
				}
			});
		}

	</script>
	
</body>
</html>
